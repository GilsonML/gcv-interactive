<!DOCTYPE html>
<html lang="pt-BR">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>GCV-INTERACTIVE - Gerador de Curr√≠culos</title>
   <script src="https://cdn.tailwindcss.com"></script>
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
   <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
   <!-- jsPDF -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
   <!-- html2canvas -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
   <style>
       /* Barra de Rolagem Personalizada */
       ::-webkit-scrollbar { width: 8px; height: 8px; }
       ::-webkit-scrollbar-track { background: #f1f1f1; }
       ::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 4px; }
       ::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }

       /* Simula√ß√£o de Papel A4 */
       .a4-paper { 
           width: 210mm; 
           min-height: 297mm; 
           background: white; 
           box-shadow: 0 0 20px rgba(0,0,0,0.1); 
           margin: 0 auto; 
           position: relative; 
           overflow: visible;
           box-sizing: border-box; 
           padding: 15mm !important;
       }

       @media print {
           body * { visibility: hidden; }
           #cv-content, #cv-content * { visibility: visible; }
           #cv-content { 
               position: absolute; 
               left: 0; 
               top: 0; 
               width: 100%;
               padding: 15mm;
           }
       }

       /* Modo de Simula√ß√£o PDF */
       .pdf-simulation-mode {
           position: fixed !important;
           top: 0 !important;
           left: 0 !important;
           width: 100vw !important;
           height: 100vh !important;
           z-index: 9999 !important;
           background: #525659 !important;
           display: flex !important;
           flex-direction: column !important;
           align-items: center !important;
           justify-content: flex-start !important;
           overflow-y: auto !important;
           padding: 40px 20px !important;
       }

       .pdf-toolbar {
           position: fixed;
           top: 0;
           left: 0;
           right: 0;
           height: 60px;
           background: #323639;
           display: flex;
           align-items: center;
           justify-content: space-between;
           padding: 0 20px;
           z-index: 10000;
           color: white;
       }

       .pdf-container {
           margin-top: 80px;
           display: flex;
           flex-direction: column;
           align-items: center;
           gap: 20px;
           width: 100%;
       }

       .pdf-page {
           background: white;
           box-shadow: 0 10px 30px rgba(0,0,0,0.3);
           margin: 20px auto;
           transform-origin: center top;
       }

       /* Estilos de Foto */
       .photo-container {
           position: relative;
           width: 120px;
           height: 120px;
           border-radius: 50%;
           overflow: hidden;
           border: 3px solid #e5e7eb;
           cursor: pointer;
           transition: all 0.3s ease;
       }

       .photo-container:hover {
           border-color: #3b82f6;
           transform: scale(1.05);
       }

       .photo-container img {
           width: 100%;
           height: 100%;
           object-fit: cover;
       }

       .photo-placeholder {
           width: 100%;
           height: 100%;
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           display: flex;
           align-items: center;
           justify-content: center;
           color: white;
           font-size: 48px;
           font-weight: bold;
       }

       .photo-upload-btn {
           position: absolute;
           bottom: 0;
           right: 0;
           background: #3b82f6;
           color: white;
           width: 32px;
           height: 32px;
           border-radius: 50%;
           display: flex;
           align-items: center;
           justify-content: center;
           cursor: pointer;
           border: 2px solid white;
           transition: all 0.3s ease;
       }

       .photo-upload-btn:hover {
           background: #2563eb;
           transform: scale(1.1);
       }

       /* Estilos de Temas */
       .theme-modern h1, .theme-modern h2 { font-family: 'Inter', sans-serif; }
       .theme-classic h1, .theme-classic h2 { font-family: 'Merriweather', serif; }
       .theme-minimal * { font-family: system-ui, -apple-system, sans-serif; }
       .theme-vibrant .accent-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
       
       .theme-modern .accent-bg { background-color: #1e293b; color: white; }
       .theme-modern .accent-text { color: #1e293b; }
       .theme-modern .border-accent { border-color: #1e293b; }
       
       .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
       @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
       
       /* ===== MODO DESENVOLVEDOR (INVIS√çVEL PARA USU√ÅRIOS NORMAIS) ===== */
       .dev-only { display: none; }
       .dev-mode .dev-only { display: block; }
       
       /* Badge de contador - invis√≠vel por padr√£o */
       .download-counter-badge {
           position: fixed;
           bottom: 20px;
           left: 20px;
           background: rgba(0,0,0,0.9);
           color: #10b981;
           padding: 12px 20px;
           border-radius: 40px;
           font-size: 14px;
           font-weight: 600;
           z-index: 10001;
           backdrop-filter: blur(8px);
           border: 1px solid #10b981;
           box-shadow: 0 4px 15px rgba(0,0,0,0.5);
           display: none;
           align-items: center;
           gap: 12px;
           letter-spacing: 0.5px;
       }
       
       /* S√≥ aparece em modo desenvolvedor */
       .dev-mode .download-counter-badge {
           display: flex !important;
       }
       
       /* Painel de estat√≠sticas completo */
       .dev-stats-panel {
           position: fixed;
           top: 80px;
           left: 20px;
           background: rgba(17, 24, 39, 0.98);
           color: white;
           padding: 20px;
           border-radius: 16px;
           border: 1px solid #10b981;
           z-index: 10000;
           width: 300px;
           transform: translateX(-120%);
           transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
           border-left: 4px solid #10b981;
           box-shadow: 0 10px 30px rgba(0,0,0,0.5);
           backdrop-filter: blur(10px);
       }
       
       .dev-mode .dev-stats-panel { 
           transform: translateX(0); 
       }
       
       .dev-stats-header {
           display: flex;
           justify-content: space-between;
           align-items: center;
           margin-bottom: 16px;
           padding-bottom: 12px;
           border-bottom: 1px solid #374151;
       }
       
       .dev-stats-header h3 {
           font-size: 16px;
           font-weight: 700;
           color: #10b981;
           text-transform: uppercase;
           letter-spacing: 1px;
       }
       
       .dev-stats-header span {
           background: #10b981;
           color: #111827;
           padding: 4px 8px;
           border-radius: 20px;
           font-size: 11px;
           font-weight: 700;
       }
       
       .dev-stat-item {
           display: flex;
           justify-content: space-between;
           margin-bottom: 12px;
           font-size: 14px;
           padding: 4px 0;
       }
       
       .dev-stat-label { 
           color: #9ca3af;
           display: flex;
           align-items: center;
           gap: 6px;
       }
       
       .dev-stat-value { 
           color: #10b981; 
           font-weight: 700;
           font-size: 16px;
           background: rgba(16, 185, 129, 0.1);
           padding: 4px 12px;
           border-radius: 20px;
           border: 1px solid rgba(16, 185, 129, 0.3);
       }
       
       .dev-reset-btn {
           width: 100%;
           background: #374151;
           color: #ef4444;
           padding: 10px;
           border-radius: 8px;
           font-size: 13px;
           margin-top: 16px;
           cursor: pointer;
           border: 1px solid #ef4444;
           font-weight: 600;
           transition: all 0.2s;
           display: flex;
           align-items: center;
           justify-content: center;
           gap: 8px;
       }
       
       .dev-reset-btn:hover {
           background: #ef4444;
           color: white;
       }
       
       .dev-indicator {
           position: fixed;
           top: 80px;
           right: 20px;
           background: #10b981;
           color: #111827;
           padding: 8px 16px;
           border-radius: 40px;
           font-size: 13px;
           font-weight: 700;
           z-index: 10000;
           display: none;
           align-items: center;
           gap: 8px;
           box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
           border: 1px solid white;
       }
       
       .dev-mode .dev-indicator {
           display: flex;
       }
   </style>
</head>
<body class="bg-gray-100 text-gray-800 h-screen flex flex-col overflow-hidden font-sans">

   <!-- ===== ELEMENTOS VIS√çVEIS APENAS EM MODO DESENVOLVEDOR ===== -->
   
   <!-- Indicador de Modo Dev (topo) -->
   <div class="dev-indicator no-print">
       <i class="fas fa-code"></i> MODO DESENVOLVEDOR ATIVO
       <span class="bg-black text-white px-2 py-0.5 rounded text-xs">Ctrl+Shift+D</span>
   </div>
   
   <!-- Badge de contador de downloads (s√≥ vis√≠vel em modo dev) -->
   <div class="download-counter-badge no-print" id="downloadCounterBadge">
       <i class="fas fa-download text-xl"></i>
       <div class="flex flex-col">
           <span class="text-xs text-gray-400">Total de Downloads</span>
           <span class="text-2xl font-bold text-white" id="downloadCountDisplay">0</span>
       </div>
       <div class="h-8 w-px bg-gray-600 mx-2"></div>
       <div class="flex flex-col">
           <span class="text-xs text-gray-400">Hoje</span>
           <span class="text-lg font-bold text-white" id="todayCountDisplay">0</span>
       </div>
   </div>
   
   <!-- Painel completo de estat√≠sticas (s√≥ vis√≠vel em modo dev) -->
   <div class="dev-stats-panel no-print" id="devStatsPanel">
       <div class="dev-stats-header">
           <h3><i class="fas fa-chart-line mr-2"></i>DEV STATS</h3>
           <span>v2.0</span>
       </div>
       
       <div class="dev-stat-item">
           <span class="dev-stat-label"><i class="fas fa-database"></i> Total de Downloads:</span>
           <span class="dev-stat-value" id="statTotalDownloads">0</span>
       </div>
       <div class="dev-stat-item">
           <span class="dev-stat-label"><i class="fas fa-calendar-day"></i> Downloads Hoje:</span>
           <span class="dev-stat-value" id="statTodayDownloads">0</span>
       </div>
       <div class="dev-stat-item">
           <span class="dev-stat-label"><i class="fas fa-clock"></i> Sess√£o Atual:</span>
           <span class="dev-stat-value" id="statSessionDownloads">0</span>
       </div>
       <div class="dev-stat-item">
           <span class="dev-stat-label"><i class="fas fa-history"></i> √öltimo Reset:</span>
           <span class="dev-stat-value text-xs" id="statLastReset">Hoje</span>
       </div>
       
       <div class="border-t border-gray-700 my-3 pt-3">
           <div class="dev-stat-item">
               <span class="dev-stat-label"><i class="fas fa-chart-bar"></i> M√©dia/Dia:</span>
               <span class="dev-stat-value" id="statAverage">0</span>
           </div>
       </div>
       
       <button class="dev-reset-btn" onclick="resetDownloadCounter()">
           <i class="fas fa-trash-alt"></i> Resetar Todos os Contadores
       </button>
       
       <p class="text-xs text-gray-600 text-center mt-3">
           <i class="fas fa-eye-slash"></i> Invis√≠vel para usu√°rios normais
       </p>
   </div>

   <!-- Sobreposi√ß√£o de Visualiza√ß√£o PDF -->
   <div id="pdf-simulation-overlay" class="hidden fixed inset-0 z-[9999] bg-[#525659] flex-col">
       <div class="pdf-toolbar">
           <div class="flex items-center gap-4">
               <div class="flex items-center gap-2 text-red-400">
                   <i class="fas fa-file-pdf text-xl"></i>
                   <span class="font-semibold text-sm" id="pdf-filename">Curriculo.pdf</span>
               </div>
           </div>
           <div class="flex items-center gap-3">
               <button onclick="downloadPDF()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-1.5 rounded text-sm font-medium flex items-center gap-2">
                   <i class="fas fa-download"></i> Baixar PDF
               </button>
               <button onclick="closePDFSimulation()" class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-1.5 rounded text-sm font-medium">
                   <i class="fas fa-times"></i> Fechar
               </button>
           </div>
       </div>
       <div class="pdf-container" id="pdf-container"></div>
   </div>

   <!-- Cabe√ßalho -->
   <header class="bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6 shadow-sm no-print shrink-0">
       <div class="flex items-center gap-3">
           <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl">
               <i class="fas fa-file-signature"></i>
           </div>
           <h1 class="font-bold text-xl text-gray-900">GCV<span class="text-blue-600">-INTERACTIVE</span></h1>
       </div>
       <div class="flex bg-gray-100 rounded-lg p-1 border border-gray-200">
           <button onclick="setTheme('modern')" class="theme-btn px-3 py-1.5 text-xs font-medium rounded-md bg-white shadow-sm" data-theme="modern">Moderno</button>
           <button onclick="setTheme('classic')" class="theme-btn px-3 py-1.5 text-xs font-medium rounded-md text-gray-500" data-theme="classic">Cl√°ssico</button>
           <button onclick="setTheme('minimal')" class="theme-btn px-3 py-1.5 text-xs font-medium rounded-md text-gray-500" data-theme="minimal">Minimalista</button>
           <button onclick="setTheme('vibrant')" class="theme-btn px-3 py-1.5 text-xs font-medium rounded-md text-gray-500" data-theme="vibrant">Vibrante</button>
       </div>
   </header>

   <!-- √Årea Principal -->
   <div class="flex flex-1 overflow-hidden">
       <!-- Editor -->
       <aside class="w-[450px] bg-white border-r border-gray-200 flex flex-col overflow-hidden no-print">
           <div class="flex border-b border-gray-200">
               <button onclick="switchTab('content')" id="tab-content" class="flex-1 py-4 text-sm font-medium text-blue-600 border-b-2 border-blue-600">Conte√∫do</button>
               <button onclick="switchTab('layout')" id="tab-layout" class="flex-1 py-4 text-sm font-medium text-gray-500">Layout</button>
           </div>
           <div class="flex-1 overflow-y-auto p-6 space-y-8" id="editor-scroll-area">
               <!-- Conte√∫do ser√° carregado via JavaScript -->
           </div>
       </aside>

       <!-- Visualiza√ß√£o -->
       <main class="flex-1 bg-gray-100/50 relative overflow-hidden flex flex-col">
           <div class="absolute bottom-6 right-6 flex flex-col gap-2 no-print z-30">
               <button onclick="adjustZoom(0.1)" class="w-10 h-10 bg-white rounded-full shadow-lg hover:bg-gray-50"><i class="fas fa-plus"></i></button>
               <button onclick="adjustZoom(-0.1)" class="w-10 h-10 bg-white rounded-full shadow-lg hover:bg-gray-50"><i class="fas fa-minus"></i></button>
               <button onclick="resetZoom()" class="w-10 h-10 bg-white rounded-full shadow-lg text-xs hover:bg-gray-50">Ajustar</button>
           </div>
           <div class="flex-1 overflow-auto p-8 flex justify-center items-start" id="preview-scroll-area">
               <div id="cv-preview-container" class="transition-transform duration-200 origin-top" style="transform: scale(0.9);">
                   <div id="cv-content" class="a4-paper theme-modern text-gray-800">
                       <!-- Cabe√ßalho do CV com Foto -->
                       <header class="flex gap-6 mb-6 border-b-2 pb-6 items-start" style="border-color: #1e293b;">
                           <div id="preview-photo" class="w-24 h-24 rounded-lg bg-gray-200 bg-cover bg-center flex-shrink-0 hidden"></div>
                           <div class="flex-1">
                               <h1 class="text-3xl font-bold text-gray-900 mb-1" id="preview-name">Ana Silva</h1>
                               <p class="text-lg mb-3" style="color: #1e293b;" id="preview-title">Designer de Produto S√™nior</p>
                               <div class="flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-600">
                                   <span><i class="fas fa-envelope mr-1"></i> <span id="preview-email">ana@email.com</span></span>
                                   <span><i class="fas fa-phone mr-1"></i> <span id="preview-phone">(11) 98765-4321</span></span>
                                   <span><i class="fas fa-map-marker-alt mr-1"></i> <span id="preview-location">S√£o Paulo</span></span>
                               </div>
                           </div>
                       </header>

                       <div class="grid grid-cols-3 gap-6">
                           <!-- Coluna Esquerda -->
                           <div class="col-span-1 space-y-6 border-r border-gray-200 pr-6">
                               <section>
                                   <h2 class="text-sm font-bold uppercase tracking-wider mb-3" style="color: #1e293b;">Habilidades</h2>
                                   <div id="preview-skills" class="flex flex-wrap gap-2"></div>
                               </section>
                               <section>
                                   <h2 class="text-sm font-bold uppercase tracking-wider mb-3" style="color: #1e293b;">Idiomas</h2>
                                   <div id="preview-languages" class="space-y-2"></div>
                               </section>
                               <section>
                                   <h2 class="text-sm font-bold uppercase tracking-wider mb-3" style="color: #1e293b;">Educa√ß√£o</h2>
                                   <div id="preview-education" class="space-y-3"></div>
                               </section>
                           </div>
                           <!-- Coluna Direita -->
                           <div class="col-span-2 pl-2">
                               <section class="mb-6">
                                   <h2 class="text-sm font-bold uppercase tracking-wider mb-3" style="color: #1e293b;">Perfil</h2>
                                   <p class="text-sm leading-relaxed text-gray-600" id="preview-summary"></p>
                               </section>
                               <section class="mb-6">
                                   <h2 class="text-sm font-bold uppercase tracking-wider mb-4" style="color: #1e293b;">Experi√™ncia</h2>
                                   <div id="preview-experience" class="space-y-5"></div>
                               </section>
                               <section>
                                   <h2 class="text-sm font-bold uppercase tracking-wider mb-4" style="color: #1e293b;">Pr√™mios</h2>
                                   <div id="preview-awards" class="space-y-3"></div>
                               </section>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
       </main>
   </div>

   <!-- Footer -->
   <footer class="bg-white border-t border-gray-200 py-3 px-6 text-center text-sm text-gray-600 no-print">
       ¬© 2026 GCV-INTERACTIVE - Gilson Fernandes. Todos os direitos reservados.
   </footer>

   <script>
       (function() {
           // Dados padr√£o
           const defaultData = {
               name: "Layonel Silva",
               title: "Designer de Produto S√™nior",
               email: "layor.silva@exemplo.com",
               phone: "+244 933333333",
               location: "Luanda, LDA",
               summary: "Designer de Produto criativo e detalhista com mais de 6 anos de experi√™ncia na constru√ß√£o de produtos digitais para fintechs e healthtechs. Especialista em design systems e experi√™ncia do usu√°rio.",
               skills: ["Figma", "UI/UX", "React", "Tailwind", "Prototipagem", "Design Systems"],
               experience: [
                   { role: "Designer S√™nior", company: "TechFlow", date: "2021-Presente", description: "Liderando sistema de design que atende 5 produtos digitais." },
                   { role: "Designer UI/UX", company: "GCV", date: "2018-2021", description: "Design de apps para fintech e sa√∫de com mais de 1M de usu√°rios." }
               ],
               education: [
                   { degree: "Bacharel em Design", school: "UAN", date: "2014-2018" }
               ],
               awards: [
                   { title: "Melhor App Design", organization: "Premios", year: "2023" }
               ],
               languages: [
                   { name: "Portugu√™s", level: "Nativo" },
                   { name: "Ingl√™s", level: "Fluente" }
               ],
               theme: "modern",
               photo: null
           };

           let cvData = JSON.parse(JSON.stringify(defaultData));
           let currentZoom = 0.9;
           
           // ===== SISTEMA DE CONTADOR DE DOWNLOADS (INVIS√çVEL PARA USU√ÅRIOS) =====
           let downloadStats = {
               total: 0,
               today: 0,
               session: 0,
               lastReset: new Date().toDateString(),
               history: []
           };
           
           // Modo desenvolvedor (inicialmente desativado)
           let devMode = false;
           
           // Carregar estat√≠sticas do localStorage
           function loadDownloadStats() {
               try {
                   const saved = localStorage.getItem('gcv_dev_stats');
                   if (saved) {
                       downloadStats = JSON.parse(saved);
                       const today = new Date().toDateString();
                       
                       // Resetar contador di√°rio se for um novo dia
                       if (downloadStats.lastReset !== today) {
                           downloadStats.today = 0;
                           downloadStats.lastReset = today;
                       }
                       
                       // Garantir que session comece em 0
                       downloadStats.session = 0;
                   } else {
                       // Inicializar com valores padr√£o
                       saveDownloadStats();
                   }
               } catch (e) {
                   console.warn('Erro ao carregar estat√≠sticas:', e);
               }
               updateDisplay();
           }
           
           function saveDownloadStats() {
               try {
                   localStorage.setItem('gcv_dev_stats', JSON.stringify(downloadStats));
               } catch (e) {
                   console.warn('Erro ao salvar estat√≠sticas:', e);
               }
           }
           
           // Incrementar contador (chamado a cada download)
           function incrementCounter() {
               downloadStats.total++;
               downloadStats.today++;
               downloadStats.session++;
               
               // Adicionar ao hist√≥rico
               downloadStats.history.push({
                   timestamp: new Date().toISOString(),
                   name: cvData.name || 'Desconhecido'
               });
               
               // Manter apenas os √∫ltimos 100 registros
               if (downloadStats.history.length > 100) {
                   downloadStats.history = downloadStats.history.slice(-100);
               }
               
               saveDownloadStats();
               updateDisplay();
               return downloadStats;
           }
           
           // Atualizar todos os displays
           function updateDisplay() {
               document.getElementById('downloadCountDisplay').textContent = downloadStats.total;
               document.getElementById('todayCountDisplay').textContent = downloadStats.today;
               document.getElementById('statTotalDownloads').textContent = downloadStats.total;
               document.getElementById('statTodayDownloads').textContent = downloadStats.today;
               document.getElementById('statSessionDownloads').textContent = downloadStats.session;
               document.getElementById('statLastReset').textContent = downloadStats.lastReset;
               
               // Calcular m√©dia
               const daysActive = Math.ceil((new Date() - new Date(downloadStats.lastReset)) / (1000 * 60 * 60 * 24)) || 1;
               const average = Math.round(downloadStats.total / daysActive);
               document.getElementById('statAverage').textContent = average;
           }
           
           // Resetar contadores (apenas para desenvolvedor)
           window.resetDownloadCounter = function() {
               if (confirm('‚ö†Ô∏è ATEN√á√ÉO: Isso resetar√° TODOS os contadores de download!\n\nTem certeza?')) {
                   downloadStats = {
                       total: 0,
                       today: 0,
                       session: 0,
                       lastReset: new Date().toDateString(),
                       history: []
                   };
                   saveDownloadStats();
                   updateDisplay();
                   
                   // Feedback visual
                   const btn = event?.target;
                   if (btn) {
                       const originalText = btn.innerHTML;
                       btn.innerHTML = '<i class="fas fa-check"></i> Resetado!';
                       btn.style.background = '#10b981';
                       btn.style.color = 'white';
                       setTimeout(() => {
                           btn.innerHTML = originalText;
                           btn.style.background = '#374151';
                           btn.style.color = '#ef4444';
                       }, 2000);
                   }
               }
           };
           
           // ===== MODO DESENVOLVEDOR (Ctrl+Shift+D) =====
           function toggleDevMode() {
               devMode = !devMode;
               document.body.classList.toggle('dev-mode', devMode);
               
               // Feedback visual
               if (devMode) {
                   console.log('üîß Modo Desenvolvedor ATIVADO - Contadores vis√≠veis');
               } else {
                   console.log('üîß Modo Desenvolvedor DESATIVADO');
               }
           }
           
           // Atalho de teclado para modo desenvolvedor
           document.addEventListener('keydown', (e) => {
               // Ctrl+Shift+D (Windows/Linux) ou Cmd+Shift+D (Mac)
               if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'D') {
                   e.preventDefault();
                   toggleDevMode();
               }
           });

           // ===== FUN√á√ÉO DE UPLOAD DE FOTO =====
           window.handlePhotoUpload = function(input) {
               if (input.files && input.files[0]) {
                   const reader = new FileReader();
                   
                   reader.onload = function(e) {
                       cvData.photo = e.target.result;
                       updatePhotoPreview();
                       
                       // Salvar no localStorage para persist√™ncia
                       try {
                           localStorage.setItem('gcv_photo', cvData.photo);
                       } catch (e) {
                           console.warn('Erro ao salvar foto:', e);
                       }
                   };
                   
                   reader.readAsDataURL(input.files[0]);
               }
           };

           // Fun√ß√£o para remover foto
           window.removePhoto = function() {
               cvData.photo = null;
               updatePhotoPreview();
               try {
                   localStorage.removeItem('gcv_photo');
               } catch (e) {
                   console.warn('Erro ao remover foto:', e);
               }
           };

           // Atualizar preview da foto
           function updatePhotoPreview() {
               const previewPhoto = document.getElementById('preview-photo');
               const photoContainer = document.getElementById('photo-container-preview');
               
               if (cvData.photo) {
                   previewPhoto.style.backgroundImage = `url('${cvData.photo}')`;
                   previewPhoto.classList.remove('hidden');
                   
                   if (photoContainer) {
                       photoContainer.innerHTML = `
                           <img src="${cvData.photo}" alt="Foto" class="w-full h-full object-cover rounded-lg">
                           <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center gap-2 rounded-lg">
                               <label class="cursor-pointer text-white hover:text-blue-300">
                                   <i class="fas fa-camera text-lg"></i>
                                   <input type="file" accept="image/*" class="hidden" onchange="handlePhotoUpload(this)">
                               </label>
                               <button onclick="removePhoto()" class="text-white hover:text-red-300">
                                   <i class="fas fa-trash text-lg"></i>
                               </button>
                           </div>
                       `;
                   }
               } else {
                   previewPhoto.classList.add('hidden');
                   
                   if (photoContainer) {
                       photoContainer.innerHTML = `
                           <div class="w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center rounded-lg">
                               <span class="text-white text-4xl font-bold">${cvData.name ? cvData.name.charAt(0) : '?'}</span>
                           </div>
                           <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center rounded-lg">
                               <label class="cursor-pointer text-white hover:text-blue-300">
                                   <i class="fas fa-camera text-lg"></i>
                                   <input type="file" accept="image/*" class="hidden" onchange="handlePhotoUpload(this)">
                               </label>
                           </div>
                       `;
                   }
               }
           }

           // ===== FUN√á√ÉO PRINCIPAL DE DOWNLOAD (com contador) =====
           window.downloadPDF = async function() {
               try {
                   // Incrementar contador (apenas para estat√≠sticas do dev)
                   incrementCounter();
                   
                   // Mostrar indicador de loading
                   const btn = event?.target?.closest('button');
                   const originalText = btn ? btn.innerHTML : 'Baixar PDF';
                   if (btn) {
                       btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Gerando...';
                       btn.disabled = true;
                   }
                   
                   // Nome do arquivo
                   const nomeArquivo = (cvData.name || 'Curriculo').replace(/\s+/g, '_') + '.pdf';
                   
                   // Elemento a ser capturado
                   const element = document.getElementById('cv-content');
                   if (!element) throw new Error('Elemento do curr√≠culo n√£o encontrado');
                   
                   // Configura√ß√µes para melhor qualidade
                   const canvas = await html2canvas(element, {
                       scale: 2,
                       backgroundColor: '#ffffff',
                       logging: false,
                       allowTaint: false,
                       useCORS: true,
                       windowWidth: element.scrollWidth,
                       windowHeight: element.scrollHeight
                   });
                   
                   // Criar PDF
                   const { jsPDF } = window.jspdf;
                   
                   // Calcular dimens√µes proporcionais
                   const imgWidth = 210; // mm (A4 width)
                   const pageHeight = 297; // mm (A4 height)
                   const imgHeight = (canvas.height * imgWidth) / canvas.width;
                   
                   // Criar PDF no formato A4
                   const doc = new jsPDF({
                       orientation: imgHeight > pageHeight ? 'portrait' : 'portrait',
                       unit: 'mm',
                       format: 'a4'
                   });
                   
                   // Adicionar imagem
                   const imgData = canvas.toDataURL('image/png');
                   
                   doc.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight, undefined, 'FAST');
                   
                   // Salvar PDF
                   doc.save(nomeArquivo);
                   
                   // Restaurar bot√£o
                   if (btn) {
                       btn.innerHTML = originalText;
                       btn.disabled = false;
                   }
                   
               } catch (error) {
                   console.error('Erro detalhado:', error);
                   alert('Erro ao gerar PDF. Por favor, tente novamente.');
                   
                   // Restaurar bot√£o em caso de erro
                   const btn = event?.target?.closest('button');
                   if (btn) {
                       btn.innerHTML = '<i class="fas fa-download"></i> Baixar PDF';
                       btn.disabled = false;
                   }
               }
           };

           // Fun√ß√µes auxiliares (mantidas do c√≥digo anterior)
           function setupInputListeners() {
               document.querySelectorAll('[data-field]').forEach(input => {
                   input.addEventListener('input', (e) => {
                       cvData[e.target.dataset.field] = e.target.value;
                       updatePreviewField(e.target.dataset.field, e.target.value);
                       updatePhotoPreview(); // Atualizar inicial da foto se necess√°rio
                   });
               });
           }

           function setupSkillInput() {
               const input = document.getElementById('skill-input');
               if (input) {
                   input.addEventListener('keydown', (e) => {
                       if (e.key === 'Enter') {
                           e.preventDefault();
                           const val = e.target.value.trim();
                           if (val) {
                               cvData.skills.push(val);
                               e.target.value = '';
                               renderSkills();
                               renderPreview();
                           }
                       }
                   });
               }
           }

           window.loadDataToForm = function() {
               document.querySelectorAll('[data-field]').forEach(input => {
                   const field = input.dataset.field;
                   if (cvData[field] !== undefined) input.value = cvData[field];
               });
               renderExperienceEditor();
               renderEducationEditor();
               renderAwardsEditor();
               renderLanguagesEditor();
               renderSkills();
               updatePhotoPreview();
           };

           window.renderPreview = function() {
               document.getElementById('preview-name').textContent = cvData.name || '';
               document.getElementById('preview-title').textContent = cvData.title || '';
               document.getElementById('preview-email').textContent = cvData.email || '';
               document.getElementById('preview-phone').textContent = cvData.phone || '';
               document.getElementById('preview-location').textContent = cvData.location || '';
               document.getElementById('preview-summary').textContent = cvData.summary || '';
               
               renderExperiencePreview();
               renderEducationPreview();
               renderAwardsPreview();
               renderLanguagesPreview();
               renderSkillsPreview();
               updatePhotoPreview();
           };

           function updatePreviewField(field, value) {
               const map = {
                   'name': 'preview-name', 'title': 'preview-title', 'email': 'preview-email',
                   'phone': 'preview-phone', 'location': 'preview-location', 'summary': 'preview-summary'
               };
               if (map[field]) {
                   const el = document.getElementById(map[field]);
                   if (el) el.textContent = value;
               }
           }

           function renderExperienceEditor() {
               const container = document.getElementById('experience-editor-list');
               if (!container) return;
               container.innerHTML = '';
               cvData.experience.forEach((job, index) => {
                   const div = document.createElement('div');
                   div.className = 'bg-gray-50 border rounded-lg p-3 relative group';
                   div.innerHTML = `
                       <div class="absolute right-2 top-2 opacity-0 group-hover:opacity-100">
                           <button onclick="deleteItem('experience', ${index})" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                       </div>
                       <input type="text" value="${job.role.replace(/"/g, '&quot;')}" onchange="updateItem('experience', ${index}, 'role', this.value)" class="w-full bg-transparent font-bold text-sm mb-1 border-none focus:ring-0" placeholder="Cargo">
                       <input type="text" value="${job.company.replace(/"/g, '&quot;')}" onchange="updateItem('experience', ${index}, 'company', this.value)" class="w-full bg-transparent text-xs text-gray-600 mb-1 border-none focus:ring-0" placeholder="Empresa">
                       <input type="text" value="${job.date.replace(/"/g, '&quot;')}" onchange="updateItem('experience', ${index}, 'date', this.value)" class="w-full bg-transparent text-xs text-gray-400 mb-2 border-none focus:ring-0" placeholder="Per√≠odo">
                       <textarea onchange="updateItem('experience', ${index}, 'description', this.value)" class="w-full bg-white text-xs p-2 rounded border" rows="2">${job.description.replace(/"/g, '&quot;')}</textarea>
                   `;
                   container.appendChild(div);
               });
           }

           function renderExperiencePreview() {
               const container = document.getElementById('preview-experience');
               if (!container) return;
               container.innerHTML = '';
               cvData.experience.forEach(job => {
                   container.innerHTML += `
                       <div class="mb-4">
                           <div class="flex justify-between items-baseline mb-1">
                               <h3 class="font-bold text-gray-800 text-sm">${job.role || ''}</h3>
                               <span class="text-xs text-gray-500">${job.date || ''}</span>
                           </div>
                           <div class="text-xs font-semibold mb-1" style="color: #1e293b;">${job.company || ''}</div>
                           <p class="text-xs text-gray-600">${job.description || ''}</p>
                       </div>
                   `;
               });
           }

           function renderEducationEditor() {
               const container = document.getElementById('education-editor-list');
               if (!container) return;
               container.innerHTML = '';
               cvData.education.forEach((edu, index) => {
                   const div = document.createElement('div');
                   div.className = 'bg-gray-50 border rounded-lg p-3 relative group';
                   div.innerHTML = `
                       <div class="absolute right-2 top-2 opacity-0 group-hover:opacity-100">
                           <button onclick="deleteItem('education', ${index})" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                       </div>
                       <input type="text" value="${edu.degree.replace(/"/g, '&quot;')}" onchange="updateItem('education', ${index}, 'degree', this.value)" class="w-full bg-transparent font-bold text-sm mb-1 border-none focus:ring-0" placeholder="Grau">
                       <input type="text" value="${edu.school.replace(/"/g, '&quot;')}" onchange="updateItem('education', ${index}, 'school', this.value)" class="w-full bg-transparent text-xs text-gray-600 mb-1 border-none focus:ring-0" placeholder="Institui√ß√£o">
                       <input type="text" value="${edu.date.replace(/"/g, '&quot;')}" onchange="updateItem('education', ${index}, 'date', this.value)" class="w-full bg-transparent text-xs text-gray-400 border-none focus:ring-0" placeholder="Ano">
                   `;
                   container.appendChild(div);
               });
           }

           function renderEducationPreview() {
               const container = document.getElementById('preview-education');
               if (!container) return;
               container.innerHTML = '';
               cvData.education.forEach(edu => {
                   container.innerHTML += `
                       <div class="mb-3">
                           <h3 class="font-bold text-gray-800 text-sm">${edu.degree || ''}</h3>
                           <div class="text-xs text-gray-600">${edu.school || ''}</div>
                           <div class="text-xs text-gray-400 italic">${edu.date || ''}</div>
                       </div>
                   `;
               });
           }

           function renderAwardsEditor() {
               const container = document.getElementById('awards-editor-list');
               if (!container) return;
               container.innerHTML = '';
               cvData.awards.forEach((award, index) => {
                   const div = document.createElement('div');
                   div.className = 'bg-gray-50 border rounded-lg p-3 relative group';
                   div.innerHTML = `
                       <div class="absolute right-2 top-2 opacity-0 group-hover:opacity-100">
                           <button onclick="deleteItem('awards', ${index})" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                       </div>
                       <input type="text" value="${award.title.replace(/"/g, '&quot;')}" onchange="updateItem('awards', ${index}, 'title', this.value)" class="w-full bg-transparent font-bold text-sm mb-1 border-none focus:ring-0" placeholder="Pr√™mio">
                       <input type="text" value="${award.organization.replace(/"/g, '&quot;')}" onchange="updateItem('awards', ${index}, 'organization', this.value)" class="w-full bg-transparent text-xs text-gray-600 mb-1 border-none focus:ring-0" placeholder="Organiza√ß√£o">
                       <input type="text" value="${award.year.replace(/"/g, '&quot;')}" onchange="updateItem('awards', ${index}, 'year', this.value)" class="w-full bg-transparent text-xs text-gray-400 border-none focus:ring-0" placeholder="Ano">
                   `;
                   container.appendChild(div);
               });
           }

           function renderAwardsPreview() {
               const container = document.getElementById('preview-awards');
               if (!container) return;
               container.innerHTML = '';
               cvData.awards.forEach(award => {
                   container.innerHTML += `
                       <div class="mb-3">
                           <div class="flex justify-between items-baseline mb-1">
                               <h3 class="font-bold text-gray-800 text-sm">${award.title || ''}</h3>
                               <span class="text-xs text-gray-500">${award.year || ''}</span>
                           </div>
                           <div class="text-xs font-semibold mb-1" style="color: #1e293b;">${award.organization || ''}</div>
                       </div>
                   `;
               });
           }

           function renderLanguagesEditor() {
               const container = document.getElementById('languages-editor-list');
               if (!container) return;
               container.innerHTML = '';
               const levels = ["Iniciante", "B√°sico", "Intermedi√°rio", "Avan√ßado", "Fluente", "Nativo"];
               cvData.languages.forEach((lang, index) => {
                   const div = document.createElement('div');
                   div.className = 'bg-gray-50 border rounded-lg p-3 relative group';
                   div.innerHTML = `
                       <div class="absolute right-2 top-2 opacity-0 group-hover:opacity-100">
                           <button onclick="deleteItem('languages', ${index})" class="text-red-500 hover:text-red-700"><i class="fas fa-trash"></i></button>
                       </div>
                       <div class="grid grid-cols-2 gap-2">
                           <input type="text" value="${lang.name.replace(/"/g, '&quot;')}" onchange="updateItem('languages', ${index}, 'name', this.value)" class="w-full bg-transparent font-bold text-sm border-none focus:ring-0" placeholder="Idioma">
                           <select onchange="updateItem('languages', ${index}, 'level', this.value)" class="w-full bg-white text-xs border rounded px-2 py-1">
                               ${levels.map(level => `<option value="${level}" ${lang.level === level ? 'selected' : ''}>${level}</option>`).join('')}
                           </select>
                       </div>
                   `;
                   container.appendChild(div);
               });
           }

           function renderLanguagesPreview() {
               const container = document.getElementById('preview-languages');
               if (!container) return;
               container.innerHTML = '';
               cvData.languages.forEach(lang => {
                   container.innerHTML += `
                       <div class="flex justify-between items-center mb-2">
                           <span class="text-sm text-gray-700">${lang.name || ''}</span>
                           <span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">${lang.level || ''}</span>
                       </div>
                   `;
               });
           }

           function renderSkills() {
               const container = document.getElementById('skills-editor-list');
               if (!container) return;
               container.innerHTML = '';
               cvData.skills.forEach((skill, index) => {
                   const span = document.createElement('span');
                   span.className = 'bg-white border px-2 py-1 rounded text-xs flex items-center gap-2';
                   span.innerHTML = `${skill} <button onclick="deleteSkill(${index})" class="text-gray-400 hover:text-red-500"><i class="fas fa-times"></i></button>`;
                   container.appendChild(span);
               });
           }

           function renderSkillsPreview() {
               const container = document.getElementById('preview-skills');
               if (!container) return;
               container.innerHTML = '';
               cvData.skills.forEach(skill => {
                   container.innerHTML += `<span class="px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700 border">${skill}</span>`;
               });
           }

           // A√ß√µes globais
           window.addItem = function(type) {
               if (type === 'experience') {
                   cvData.experience.unshift({ role: "Novo Cargo", company: "Empresa", date: "Data", description: "Descri√ß√£o" });
                   renderExperienceEditor();
               } else if (type === 'education') {
                   cvData.education.unshift({ degree: "Novo Grau", school: "Institui√ß√£o", date: "Ano" });
                   renderEducationEditor();
               } else if (type === 'awards') {
                   cvData.awards.unshift({ title: "Novo Pr√™mio", organization: "Organiza√ß√£o", year: "Ano" });
                   renderAwardsEditor();
               } else if (type === 'languages') {
                   cvData.languages.unshift({ name: "Idioma", level: "Intermedi√°rio" });
                   renderLanguagesEditor();
               }
               renderPreview();
           };

           window.updateItem = function(type, index, field, value) {
               if (cvData[type] && cvData[type][index]) {
                   cvData[type][index][field] = value;
                   renderPreview();
               }
           };

           window.deleteItem = function(type, index) {
               if (cvData[type]) {
                   cvData[type].splice(index, 1);
                   if (type === 'experience') renderExperienceEditor();
                   else if (type === 'education') renderEducationEditor();
                   else if (type === 'awards') renderAwardsEditor();
                   else if (type === 'languages') renderLanguagesEditor();
                   renderPreview();
               }
           };

           window.deleteSkill = function(index) {
               cvData.skills.splice(index, 1);
               renderSkills();
               renderPreview();
           };

           window.setTheme = function(theme) {
               cvData.theme = theme;
               const cv = document.getElementById('cv-content');
               cv.className = cv.className.replace(/theme-\w+/, `theme-${theme}`);
               
               // Atualizar cores baseadas no tema
               const accentColor = theme === 'modern' ? '#1e293b' : 
                                  theme === 'classic' ? '#8b5a2b' :
                                  theme === 'vibrant' ? '#7c3aed' : '#374151';
                                  
               document.querySelectorAll('[style*="color: #1e293b"]').forEach(el => {
                   el.style.color = accentColor;
               });
               document.querySelectorAll('[style*="border-color: #1e293b"]').forEach(el => {
                   el.style.borderColor = accentColor;
               });
               
               document.querySelectorAll('.theme-btn').forEach(btn => {
                   if (btn.dataset.theme === theme) {
                       btn.classList.add('bg-white', 'shadow-sm', 'text-gray-800');
                       btn.classList.remove('text-gray-500');
                   } else {
                       btn.classList.remove('bg-white', 'shadow-sm', 'text-gray-800');
                       btn.classList.add('text-gray-500');
                   }
               });
               renderPreview();
           };

           window.simulatePDF = function() {
               showPDFPreview();
           };

           function showPDFPreview() {
               const overlay = document.getElementById('pdf-simulation-overlay');
               const container = document.getElementById('pdf-container');
               const original = document.getElementById('cv-content');
               
               document.getElementById('pdf-filename').textContent = (cvData.name || 'Curriculo').replace(/\s+/g, '_') + '.pdf';
               
               container.innerHTML = '';
               const clone = original.cloneNode(true);
               clone.id = 'cv-content-pdf';
               clone.style.transform = 'none';
               clone.style.margin = '0 auto';
               clone.style.width = '210mm';
               clone.style.padding = '15mm';
               clone.classList.add('pdf-page');
               
               container.appendChild(clone);
               overlay.classList.remove('hidden');
               overlay.classList.add('flex');
               document.body.style.overflow = 'hidden';
           }

           window.closePDFSimulation = function() {
               document.getElementById('pdf-simulation-overlay').classList.add('hidden');
               document.body.style.overflow = '';
           };

           window.switchTab = function(tab) {
               const contentTab = document.getElementById('tab-content');
               const layoutTab = document.getElementById('tab-layout');
               const editorArea = document.getElementById('editor-scroll-area');
               
               if (tab === 'content') {
                   contentTab.className = 'flex-1 py-4 text-sm font-medium text-blue-600 border-b-2 border-blue-600';
                   layoutTab.className = 'flex-1 py-4 text-sm font-medium text-gray-500';
                   editorArea.innerHTML = getContentHTML();
                   loadDataToForm();
                   setupSkillInput();
                   setupInputListeners();
               } else {
                   layoutTab.className = 'flex-1 py-4 text-sm font-medium text-blue-600 border-b-2 border-blue-600';
                   contentTab.className = 'flex-1 py-4 text-sm font-medium text-gray-500';
                   editorArea.innerHTML = getLayoutHTML();
               }
           };

           function getContentHTML() {
               return `
                   <div class="space-y-4">
                       <h3 class="text-sm font-bold text-gray-900 uppercase">Informa√ß√µes Pessoais</h3>
                       
                       <!-- Campo de Upload de Foto -->
                       <div class="flex items-center gap-4 mb-4">
                           <div id="photo-container-preview" class="relative w-20 h-20 rounded-lg overflow-hidden bg-gray-100">
                               ${cvData.photo ? 
                                   `<img src="${cvData.photo}" alt="Foto" class="w-full h-full object-cover">
                                    <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center gap-2">
                                        <label class="cursor-pointer text-white hover:text-blue-300">
                                            <i class="fas fa-camera"></i>
                                            <input type="file" accept="image/*" class="hidden" onchange="handlePhotoUpload(this)">
                                        </label>
                                        <button onclick="removePhoto()" class="text-white hover:text-red-300">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>` :
                                   `<div class="w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center">
                                        <span class="text-white text-2xl font-bold">${cvData.name ? cvData.name.charAt(0) : '?'}</span>
                                    </div>
                                    <div class="absolute inset-0 bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center">
                                        <label class="cursor-pointer text-white hover:text-blue-300">
                                            <i class="fas fa-camera text-lg"></i>
                                            <input type="file" accept="image/*" class="hidden" onchange="handlePhotoUpload(this)">
                                        </label>
                                    </div>`
                               }
                           </div>
                           <div class="flex-1">
                               <label class="block text-xs text-gray-500 mb-1">Foto do perfil</label>
                               <div class="flex gap-2">
                                   <label class="flex-1 bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium px-3 py-2 rounded-lg cursor-pointer text-center transition-colors">
                                       <i class="fas fa-camera mr-1"></i> Adicionar Foto
                                       <input type="file" id="photoInput" accept="image/*" class="hidden" onchange="handlePhotoUpload(this)">
                                   </label>
                                   ${cvData.photo ? `
                                       <button onclick="removePhoto()" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg text-xs">
                                           <i class="fas fa-trash"></i>
                                       </button>
                                   ` : ''}
                               </div>
                           </div>
                       </div>

                       <div class="grid grid-cols-2 gap-4">
                           <div class="col-span-2">
                               <input type="text" data-field="name" class="w-full bg-gray-50 border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500" placeholder="Nome completo" value="${cvData.name.replace(/"/g, '&quot;')}">
                           </div>
                           <div class="col-span-2">
                               <input type="text" data-field="title" class="w-full bg-gray-50 border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500" placeholder="Cargo atual" value="${cvData.title.replace(/"/g, '&quot;')}">
                           </div>
                           <div class="col-span-2">
                               <textarea data-field="summary" rows="3" class="w-full bg-gray-50 border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500" placeholder="Resumo profissional">${cvData.summary.replace(/"/g, '&quot;')}</textarea>
                           </div>
                           <div>
                               <input type="email" data-field="email" class="w-full bg-gray-50 border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500" placeholder="Email" value="${cvData.email.replace(/"/g, '&quot;')}">
                           </div>
                           <div>
                               <input type="text" data-field="phone" class="w-full bg-gray-50 border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500" placeholder="Telefone" value="${cvData.phone.replace(/"/g, '&quot;')}">
                           </div>
                           <div class="col-span-2">
                               <input type="text" data-field="location" class="w-full bg-gray-50 border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500" placeholder="Localiza√ß√£o" value="${cvData.location.replace(/"/g, '&quot;')}">
                           </div>
                       </div>
                       
                       <hr class="border-gray-200">
                       
                       <div class="flex justify-between items-center">
                           <h3 class="text-sm font-bold text-gray-900 uppercase">Experi√™ncia</h3>
                           <button onclick="addItem('experience')" class="text-xs bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-lg transition-colors">+ Adicionar</button>
                       </div>
                       <div id="experience-editor-list" class="space-y-3"></div>
                       
                       <hr class="border-gray-200">
                       
                       <div class="flex justify-between items-center">
                           <h3 class="text-sm font-bold text-gray-900 uppercase">Educa√ß√£o</h3>
                           <button onclick="addItem('education')" class="text-xs bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-lg transition-colors">+ Adicionar</button>
                       </div>
                       <div id="education-editor-list" class="space-y-3"></div>
                       
                       <hr class="border-gray-200">
                       
                       <div class="flex justify-between items-center">
                           <h3 class="text-sm font-bold text-gray-900 uppercase">Pr√™mios</h3>
                           <button onclick="addItem('awards')" class="text-xs bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-lg transition-colors">+ Adicionar</button>
                       </div>
                       <div id="awards-editor-list" class="space-y-3"></div>
                       
                       <hr class="border-gray-200">
                       
                       <div class="flex justify-between items-center">
                           <h3 class="text-sm font-bold text-gray-900 uppercase">Idiomas</h3>
                           <button onclick="addItem('languages')" class="text-xs bg-blue-600 hover:bg-blue-700 text-white px-3 py-1.5 rounded-lg transition-colors">+ Adicionar</button>
                       </div>
                       <div id="languages-editor-list" class="space-y-3"></div>
                       
                       <hr class="border-gray-200">
                       
                       <h3 class="text-sm font-bold text-gray-900 uppercase">Habilidades</h3>
                       <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
                           <input type="text" id="skill-input" class="w-full bg-white border border-blue-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500" placeholder="Digite uma habilidade e pressione Enter">
                           <p class="text-xs text-gray-500 mt-2"><i class="fas fa-info-circle"></i> Pressione Enter para adicionar</p>
                       </div>
                       <div id="skills-editor-list" class="flex flex-wrap gap-2 min-h-[40px] bg-gray-50 rounded-lg p-2"></div>
                       
                       <div class="pt-6">
                           <button onclick="simulatePDF()" class="w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white py-3 rounded-xl font-bold flex items-center justify-center gap-3 transition-all shadow-lg">
                               <i class="fas fa-file-pdf text-lg"></i> VISUALIZAR PDF
                           </button>
                       </div>
                   </div>
               `;
           }

           function getLayoutHTML() {
               return `
                   <div class="space-y-6">
                       <h3 class="text-sm font-bold text-gray-900 uppercase">Configura√ß√µes de Layout</h3>
                       
                       <div class="bg-gray-50 rounded-lg p-4">
                           <h4 class="font-medium text-sm mb-3">Cores</h4>
                           <div class="grid grid-cols-4 gap-2">
                               <button class="w-8 h-8 rounded-full bg-blue-600 border-2 border-white shadow"></button>
                               <button class="w-8 h-8 rounded-full bg-green-600 border-2 border-white shadow"></button>
                               <button class="w-8 h-8 rounded-full bg-purple-600 border-2 border-white shadow"></button>
                               <button class="w-8 h-8 rounded-full bg-red-600 border-2 border-white shadow"></button>
                           </div>
                       </div>
                       
                       <div class="bg-gray-50 rounded-lg p-4">
                           <h4 class="font-medium text-sm mb-3">Espa√ßamento</h4>
                           <input type="range" min="0" max="2" step="0.1" value="1" class="w-full">
                       </div>
                       
                       <div class="bg-gray-50 rounded-lg p-4">
                           <h4 class="font-medium text-sm mb-3">Fontes</h4>
                           <select class="w-full bg-white border rounded-lg px-3 py-2 text-sm">
                               <option>Inter (Padr√£o)</option>
                               <option>Merriweather</option>
                               <option>Roboto</option>
                               <option>Open Sans</option>
                           </select>
                       </div>
                       
                       <p class="text-center text-gray-400 text-sm py-4">
                           <i class="fas fa-tools mr-2"></i> Mais op√ß√µes em breve...
                       </p>
                   </div>
               `;
           }

           window.adjustZoom = function(delta) {
               currentZoom = Math.min(1.5, Math.max(0.5, currentZoom + delta));
               applyZoom();
           };

           window.resetZoom = function() {
               currentZoom = 0.9;
               applyZoom();
           };

           function applyZoom() {
               document.getElementById('cv-preview-container').style.transform = `scale(${currentZoom})`;
           }

           // Carregar foto salva
           function loadSavedPhoto() {
               try {
                   const savedPhoto = localStorage.getItem('gcv_photo');
                   if (savedPhoto) {
                       cvData.photo = savedPhoto;
                       updatePhotoPreview();
                   }
               } catch (e) {
                   console.warn('Erro ao carregar foto salva:', e);
               }
           }

           // Inicializa√ß√£o
           document.addEventListener('DOMContentLoaded', () => {
               loadDownloadStats();
               loadSavedPhoto();
               loadDataToForm();
               renderPreview();
               setupInputListeners();
               setupSkillInput();
               applyZoom();
               
               // Carregar conte√∫do inicial
               const editorArea = document.getElementById('editor-scroll-area');
               if (editorArea) {
                   editorArea.innerHTML = getContentHTML();
                   loadDataToForm();
                   setupSkillInput();
                   setupInputListeners();
                   updatePhotoPreview();
               }
           });
       })();
   </script>
</body>
</html>